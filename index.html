<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vCita Scheduler Widget with Time Labels</title>
    <!-- Include FullCalendar CSS and JavaScript -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js"></script>

    <style>
        #calendar-wrapper {
            display: flex; /* Align calendar and labels horizontally */
        }

        #calendar {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        #time-labels {
            margin-left: 10px; /* Space between calendar and labels */
            width: 50px; /* Adjust width as needed */
            text-align: center; /* Center align labels */
            position: absolute;
            top: 0;
            left: calc(100% + 10px); /* Position to the right of the calendar */
        }

        #time-labels div {
            height: 48px; /* Same height as a half-hour timeslot */
            line-height: 48px; /* Center text vertically */
            border-bottom: 1px solid #ddd; /* Optional: Adds a border between labels */
        }
    </style>
</head>
<body>

<div id="calendar-wrapper">
    <!-- Calendar Div -->
    <div id="calendar"></div>
    <!-- Custom Column for Time Labels -->
    <div id="time-labels"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var labelEl = document.getElementById('time-labels');

        var startTime = 14; // Start time in hours (2 PM)
        var endTime = 17; // End time in hours (5 PM)
        var labelIndex = 1.1; // Initial label value

        // Generate Custom Labels
        for (var hour = startTime; hour < endTime; hour += 0.5) { // Increments by 0.5 for half-hour intervals
            var labelDiv = document.createElement('div');
            labelDiv.textContent = labelIndex.toFixed(1);
            labelEl.appendChild(labelDiv);
            labelIndex += 0.1; // Increment label by 0.1 for each half-hour
        }

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'timeGridDay', // Show daily view
            initialDate: '2024-10-29',  // Set the starting date
            slotDuration: '00:30:00', // Show half-hour slots
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'timeGridDay,timeGridWeek'
            },
            events: function (fetchInfo, successCallback, failureCallback) {
                fetch('https://api.vcita.com/v1/your_endpoint', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer YOUR_VCITA_API_KEY`,
                        'X-API-Token': 'YOUR_INTANDEM_API_TOKEN'
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        const events = data.map(event => ({
                            title: event.staff_name,
                            start: event.start_time,
                            end: event.end_time
                        }));
                        successCallback(events);
                    })
                    .catch(error => {
                        console.error('Error fetching events:', error);
                        failureCallback(error);
                    });
            }
        });
        calendar.render();
    });
</script>
</body>
</html>
